<div ng-controller="allWGsController as allWGsCtrl" class="row">
    <h3>Alle WGs</h3>
    <div class="panel panel-primary">
        <div class="panel-heading"><strong>WGs</strong></div>
        <div class="panel-body">
            <table class="table table-striped table-hover">
                <thead>
                    <th>WG</th>
                    <th>Straße</th>
                    <th>Stadt</th>
                    <th></th>
                </thead>
                <tbody>
                <tr ng-repeat="wg in allWGsCtrl.wgs">
                    <td>
                        <span editable-text="wg.name" e-name="name" e-form="rowform" e-required>
                          <a ui-sref="app.wg({wgID:'{{wg._id}}'})">{{wg.name}}</a>
                        </span>
                    </td>
                    <td>
                        <span editable-text="wg.street" e-name="street" e-form="rowform" e-required>{{wg.street}}</span>
                    </td>
                    <td><span editable-text="wg.city" e-name="city" e-form="rowform" e-required>{{wg.city}}</span></td>
                    <td>
                        <!-- form -->
                        <form editable-form name="rowform" onbeforesave="allWGsCtrl.updateWG(wg._id, $data)" ng-show="rowform.$visible" class="form-inline" shown="inserted == wg._id">
                          <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary">
                            <span
                            class="glyphicon glyphicon-ok"></span><span class="hidden-xs"> Speichern</span>
                                    </button>
                          </button>
                          <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default">
                            <span
                            class="glyphicon glyphicon-remove"></span><span class="hidden-xs"> Abbrechen</span>
                          </button>
                        </form>
                
                        <div ng-show="!rowform.$visible">
                            <button class="btn btn-active" ng-click="rowform.$show()"><span class="glyphicon glyphicon-pencil"></span></button>
                            <button class="btn btn-danger" ng-click="allWGsCtrl.deleteWG(wg._id)"><span class="glyphicon glyphicon-trash"></span></button>
                            <button class="btn btn-success" ng-show="!allWGsCtrl.user.wg" title="Einschreiben" ng-click="allWGsCtrl.registerForWg(wg._id)"><span class="glyphicon glyphicon-pushpin"></span></button>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
            <button ng-hide="allWGsCtrl.showNewItem" class="btn btn-primary" ng-click="allWGsCtrl.newItem()">
                <span class="glyphicon glyphicon-plus"></span> Neue WG hinzufügen
            </button>
            <form class="form-inline new-form">
                <div class="form-group" ng-show="allWGsCtrl.showNewItem">
                    <h4>Neue WG anlegen</h4>

                    <div class="input-group">
                        <span class="input-group-addon">WG-Name</span>
                        <input type="text" class="form-control" placeholder="Im Fernsehturm"
                               ng-model="allWGsCtrl.newWG.name">
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Straße</span>
                        <input type="text" class="form-control" placeholder="Alexanderplatz"
                               ng-model="allWGsCtrl.newWG.street">
                    </div>
                    <div class="input-group">
                        <span class="input-group-addon">Stadt</span>
                        <input type="text" class="form-control" placeholder="Berlin" ng-model="allWGsCtrl.newWG.city">
                    </div>
                    <div>
                        <button class="btn btn-primary" ng-click="allWGsCtrl.addNewWG()">WG hinzufügen</button>
                        <button class="btn" ng-click="allWGsCtrl.cancelAddingNewWG()">Abbrechen</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>